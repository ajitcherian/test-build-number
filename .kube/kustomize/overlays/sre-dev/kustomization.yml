apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: ontada-sre-dev
nameSuffix: -sre-dev
commonLabels:
  app: admin-service-dev

configMapGenerator:
- name: admin-service-config
  envs: 
  - config.properties

resources:
- ../../base/common

replicas:
- name: admin-service
  count: 1

patches:
#Deployment Changes
- target:
    kind: Deployment
    name: admin-service
  patch: |-
    - op: replace
      path: "/spec/template/spec/containers/0/resources" 
      value:
        limits:
          cpu: 1
          memory: 2Gi
        requests:
          cpu: 50m
          memory: 400Mi