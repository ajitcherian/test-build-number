name: ci_pipeline

on:
  push:
    branches:
      - '*'
  # workflow_dispatch:
  #   inputs:
  #     enabled_veracode_run:
  #       description: 'Execute Veracode scan in release branch'
  #       type: boolean
  #       required: true
  #       default: false
  
jobs:
  set_env:
    name: Setup Global Environments
    runs-on: ubuntu-la***REMOVED***
    permissions:
      contents: write
    env:
      DOCKER_REGISTRY: "mck-ontada-sre.jfrog.io"
      JFROG_REPO_NAME: "ontada-f***REMOVED***r-service"
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Increase build
        run: |
         echo "BRANCH_NAME=$(echo $GITHUB_REF_NAME)" >> $GITHUB_ENV
    
      - name: Create Prerelease
        uses: ncipollo/release-action@v1
        with:
          #prerelease: true
          tag: ***REMOVED***-${{ env.BRANCH_NAME }}-.${{ github.run_number }}-${{ github.run_id }}
          makeLa***REMOVED***: true

